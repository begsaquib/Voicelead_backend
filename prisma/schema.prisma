datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id          String   @id @default(uuid()) @db.Uuid
  email       String   @unique
  password    String
  companyName String?
  booths      Booth[]
  createdAt   DateTime @default(now())
}

model Booth {
  id        String   @id @default(uuid()) @db.Uuid
  name      String?
  event     String
  location  String?
  userId    String   @db.Uuid
  user      User     @relation(fields: [userId], references: [id])
  leads     Lead[]
  createdAt DateTime @default(now())
  
  @@unique([userId]) // âœ… One booth per user constraint
}

model Lead {
  id      String @id @default(uuid()) @db.Uuid
  boothId String @db.Uuid
  booth   Booth  @relation(fields: [boothId], references: [id], onDelete: Cascade)

  name     String?
  email    String?
  company  String?
  phone    String?
  interest String?

  imageUrl   String?
  transcript String?

  status    String   @default("new")
  source    String   @default("manual")
  createdAt DateTime @default(now())
}
